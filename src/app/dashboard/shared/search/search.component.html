<mat-form-field>
  <input
    matInput
    placeholder="Search"
    type="text"
    minlength="3"
    [formControl]="searchField"
    [matAutocomplete]="auto"
  />
  <mat-hint align="start" *ngIf="lastUserSearches.length > 0"
    >You searched previously for: {{ lastUserSearches }}</mat-hint
  >
  <mat-autocomplete #auto="matAutocomplete">
    <mat-option
      *ngFor="let result of searchResults$ | async"
      [value]="searchField.value"
      dbFavorite
      [isFavorite]="result.isFavorite"
      (onSelectionChange)="onSearchResultSelected(result)"
    >
      <mat-icon *ngIf="result.type !== type.Album; else image">{{
        result.type | searchResultTypeToIcon
      }}</mat-icon>
      <ng-template #image>
        <img src="{{ result.coverSmall }}" alt="Album cover" />
      </ng-template>
      {{ result.name }} {{ result.title }}
      <em *ngIf="result.type === type.Track">{{
        result.artistId | idToArtist | async
      }}</em>
    </mat-option>
  </mat-autocomplete>
</mat-form-field>
